function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_unsupportedIterableToArray(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,e){var n;if(t)return"string"==typeof t?_arrayLikeToArray(t,e):"Map"===(n="Object"===(n={}.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(t,e):void 0}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}function _iterableToArrayLimit(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var o,a,r,c,i=[],l=!0,s=!1;try{if(r=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(o=r.call(n)).done)&&(i.push(o.value),i.length!==e);l=!0);}catch(t){s=!0,a=t}finally{try{if(!l&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(s)throw a}}return i}}function _arrayWithHoles(t){if(Array.isArray(t))return t}document.addEventListener("DOMContentLoaded",function(){var o={mainAvatar:0,yaoguang:0,kaiyang:0,yuheng:0,tianji:0,tianxuan:0,tianshu:0},a={lastClickTime:0,comboCount:0,targetId:null,COMBO_TIMEOUT:1e3},n=document.querySelector(".click-counter-container"),t=(n&&n.classList.remove("hover-active"),localStorage.getItem("starLuckCounter"));if(t)try{o=JSON.parse(t),r()}catch(t){console.error("Failed to load saved counter",t)}var t=document.querySelector(".hover-trigger"),e=document.querySelector(".top-hover-area");document.querySelector(".counter-details");function r(){var t,e,n=document.querySelector(".click-counter-container");n&&(Object.entries(o).forEach(function(t){var t=_slicedToArray(t,2),e=t[0],t=t[1],n=document.getElementById("".concat(e,"Counter"));n&&(n.textContent=t,n.classList.remove("value-change"),setTimeout(function(){n.classList.add("value-change")},10))}),t=Object.values(o).reduce(function(t,e){return t+e},0),(e=document.getElementById("totalLuckCounter"))&&(e.textContent=t,e.classList.remove("value-change"),setTimeout(function(){e.classList.add("value-change")},10)),0<t?(n.classList.add("has-counts"),n.classList.contains("shown-hint")||(n.classList.add("shown-hint"),n.classList.remove("hover-active"))):(n.classList.remove("has-counts"),n.classList.remove("shown-hint"),n.classList.remove("hover-active")))}e&&n&&(e.addEventListener("mouseenter",function(){n.classList.contains("has-counts")&&n.classList.add("hover-active")}),e.addEventListener("mouseleave",function(t){var e=n.getBoundingClientRect();(t.clientX<e.left||t.clientX>e.right||t.clientY<e.top||t.clientY>e.bottom)&&n.classList.remove("hover-active")})),n&&(n.addEventListener("mouseenter",function(){n.classList.contains("has-counts")&&n.classList.add("hover-active")}),n.addEventListener("mouseleave",function(){n.classList.remove("hover-active")})),t&&n&&t.addEventListener("mouseenter",function(){n.classList.contains("has-counts")&&n.classList.add("hover-active")});var c={mainAvatar:{text:"桃花运 +",color:"#ff69b4",glowColor:"rgba(255, 105, 180, 0.6)"},yaoguang:{text:"财运 +",color:"#ffd700",glowColor:"rgba(255, 215, 0, 0.6)"},kaiyang:{text:"健康运 +",color:"#90ee90",glowColor:"rgba(144, 238, 144, 0.6)"},yuheng:{text:"智慧运 +",color:"#87cefa",glowColor:"rgba(135, 206, 250, 0.6)"},tianji:{text:"好运 +",color:"#ba55d3",glowColor:"rgba(186, 85, 211, 0.6)"},tianxuan:{text:"福气+",color:"#ff7f50",glowColor:"rgba(255, 127, 80, 0.6)"},tianshu:{text:"缘分+",color:"#ff4500",glowColor:"rgba(255, 69, 0, 0.6)"}},e=document.querySelector(".card-inner header img");e&&e.addEventListener("click",function(t){o.mainAvatar++;var e=Date.now(),e=(e-a.lastClickTime<a.COMBO_TIMEOUT&&"mainAvatar"===a.targetId?(a.comboCount++,3<=a.comboCount&&(i(t,"连击 x".concat(a.comboCount,"！"),"#ff0000",!0),10<=a.comboCount)&&l(t)):(a.comboCount=1,a.targetId="mainAvatar"),a.lastClickTime=e,c.mainAvatar.text+o.mainAvatar);i(t,e,c.mainAvatar.color),r(),localStorage.setItem("starLuckCounter",JSON.stringify(o))});function i(t,e,n,o){var n=2<arguments.length&&void 0!==n?n:"#ff69b4",o=3<arguments.length&&void 0!==o&&o,a=document.createElement("div"),o=(a.className="floating-text",o&&(a.className+=" combo-text"),a.innerText=e,a.style.background="linear-gradient(45deg, ".concat(n,", white, ").concat(n,")"),a.style.webkitBackgroundClip="text",a.style.backgroundClip="text",a.style.webkitTextFillColor="transparent",a.style.textShadow="0 0 10px ".concat(n,", 0 0 20px ").concat(n,", 0 2px 2px rgba(0, 0, 0, 0.5)"),t.target.getBoundingClientRect()),e=t.clientX||o.left+o.width/2,n=(t.clientY||o.top)-10,r=(a.style.left="".concat(e,"px"),a.style.top="".concat(n,"px"),document.body.appendChild(a),30*(Math.random()-.5)),c=15*(Math.random()-.5);setTimeout(function(){a.style.transform="translate(".concat(r,"px, -60px) rotate(").concat(c,"deg)"),a.style.opacity="0"},10),setTimeout(function(){document.body.removeChild(a)},1e3)}function l(t){var e=document.createElement("div"),n=(e.className="rainbow-ripple",t.target.getBoundingClientRect()),o=t.clientX||n.left+n.width/2,t=(t.clientY||n.top)-10;e.style.left="".concat(o,"px"),e.style.top="".concat(t,"px"),document.body.appendChild(e),setTimeout(function(){document.body.removeChild(e)},2e3)}Object.entries({".star.yaoguang img":"yaoguang",".star.kaiyang img":"kaiyang",".star.yuheng img":"yuheng",".star.tianji img":"tianji",".star.tianxuan img":"tianxuan",".star.tianshu img":"tianshu"}).forEach(function(t){var t=_slicedToArray(t,2),e=t[0],n=t[1],t=document.querySelector(e);t&&t.addEventListener("click",function(t){o[n]++;var e=Date.now(),e=(e-a.lastClickTime<a.COMBO_TIMEOUT&&a.targetId===n?(a.comboCount++,3<=a.comboCount&&(i(t,"连击 x".concat(a.comboCount,"！"),"#ff0000",!0),10<=a.comboCount)&&l(t)):(a.comboCount=1,a.targetId=n),a.lastClickTime=e,c[n].text+o[n]);i(t,e,c[n].color),r(),localStorage.setItem("starLuckCounter",JSON.stringify(o))})}),document.addEventListener("click",function(t){var e=document.createElement("div");e.className="click-ripple",document.body.appendChild(e),e.style.left="".concat(t.clientX,"px"),e.style.top="".concat(t.clientY,"px"),setTimeout(function(){document.body.removeChild(e)},1e3)})});